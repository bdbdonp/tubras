#summary irrb Tutorials (wip)
#labels Featured

== Introduction ==

Here you will find several tutorials on how to use *irrb*.  

The tutorials on this wiki are *NOT* intended to teach you how to use Blender. Even though the tutorials may mention Blender key combinations and mouse buttons for certain functionality, you will be doing yourself a big favor by spending a little time learning the *[http://www.blender.org/education-help/quickstart/ basics of Blender]*.


== Contents ==

 * [irrbTutorials#Tutorial_Setup Tutorial Setup]
 * [irrbTutorials#A_Solid_Material A Solid Material]
 * [irrbTutorials#Single_Mesh_Multiple_Solids Single Mesh Multiple Solids]
 * [irrbTutorials#Transparent_Material Transparent Material]
 * [irrbTutorials#Light_Mapping Light Mapping]
 * [irrbTutorials#Normal_Mapping Normal Mapping]

----
=== Tutorial Setup ===

The tutorials will use the *irrb Utilities* for viewing the exporter results as well as creating binary meshes (.irrbmesh).  Installation instructions are here:

[http://code.google.com/p/tubras/wiki/irrbUtilities]

Each of these tutorials assumes the following directory structure for exported content:

{{{
c:\irrbScenes
   |
   | --- irrbTut1
   | ------ meshes
   | ------ images
   |
   | --- irrbTut2
   | ------ meshes
   | ------ images
}}}

The scene file (Scene.irr) will be created inside of the specific tutorial subdirectory.  For *irrbTut1*, this will be "c:\irrbScenes\irrbTut1\Scene.irr".  Each scenes mesh data will be saved inside of the "meshes" sub-directory underneath the appropriate tutorial.  The same holds true for related images.

Each tutorial will use the "full path" method of accessing mesh and image data.  If a tutorial uses an image created within Blender, we will manually save the image to the appropriate directory (instead of having *irrb* copy the textures).  For *irrbTut1*, the output locations would be setup as follows:

[http://tubras.googlecode.com/svn/wiki/images/irrbss17.png]

----
=== A Solid Material === 

This tutorial will generate two simple plane meshes, each containing a single UV mapped texture.  This type of material is known as an Irrlicht "*solid*" material. Our end result will look similar to this:

[http://tubras.googlecode.com/svn/wiki/images/irrbss35.jpg]

The first plane will use this image:

[http://tubras.googlecode.com/svn/wiki/images/stone1.png]

Save this image to the directory: "c:\irrbScenes\irrbTut1\images".

The second plane will use an image that we procedurally generate, bake, and save using Blenders material system.  Let's get started.

Fire up Blender and split your screen by right clicking near the top of the 3D view and selecting the "Split Area" menu item.  Move the divider to the center and left click to anchor it.


I find it convenient to add the 3D View and UV/Image Editor split to my list of available screens in the default layout.  That way I can *CTRL-LEFT/RIGHT* between screens very quickly.  Here's a good tutorial on setting up custom screens:

http://blendernewbies.blogspot.com/2006/10/video-power-of-blender-screens.html

Set the right hand window to be the UV/Image editor:

[http://tubras.googlecode.com/svn/wiki/images/irrbss19.jpg]

In the 3D view window (left side), delete the default cube (right click to select, and *XKEY* or "Delete" to delete).

From the top view (*NUM7*), add a Plane mesh (*SPACE*, Add, Mesh, Plane).  Size the mesh to be approximate 8x8 units (*SKEY* - size, and left click to set the new size):

[http://tubras.googlecode.com/svn/wiki/images/irrbss20.jpg]

Create UV Coordinates:

 * In ObjectMode (*TAB* to switch between edit and object mode).
 * FKEY to switch to Face Select Mode. (Not necessary in 2.6)
 * AKEY to select All faces.
 * UKEY to calculate UV's using a simple unwrap.

[http://tubras.googlecode.com/svn/wiki/images/irrbss21.jpg]

Now we're going to assign the previously saved stone1.png image to the UV map that was just created.  In the UV/Image editor window:

 * Select the menu Image | Open.
 * Navigate to and open c:\irrbScenes\irrTut1\images\stone1.png

[http://tubras.googlecode.com/svn/wiki/images/irrbss22.jpg]

Next we'll scale the UV coordinates a little to tile the image a bit:

 * With the cursor over the UV/Image editor.
 * *AKEY* to select all of the UV coordinates.
 * *SKEY* to scale the coordinates.
 * Drag the mouse to about 3 times the original size.

[http://tubras.googlecode.com/svn/wiki/images/irrbss23.jpg]

Depicted in the image above, we also set the Irrlicht material type to "solid" by changing the UV layer name to "solid".

Let's take a quick look at the work we've done so far by exporting the scene and viewing it in Irrlicht (iwalktest):

 * Change the right hand window to "Scripts".
 * Select the Irrlicht exporter.
 * Click the "Export" button.

[http://tubras.googlecode.com/svn/wiki/images/irrbss24.jpg]

Congratulations on your first *irrb* generated scene!

Next we'll add another plane mesh to our scene and texture it using Blenders procedural materials and texture baking.

First we'll add the second plane:

 * Position the mouse over the 3D view window.
 * De-select the existing plane.  Failing to do so will add the new plane geometry to the existing one.  
 * Switch to the front view - *NUM1*.
 * Add another plane - *SPACE*, Add, Mesh, Plane.

Next we'll position and size the second plane.  First positioning:

 * Switch to Object Mode - *TAB*.
 * Grab (*GKEY*) and then the *ZKEY* to constrain movement to the Z axis (up/down).  Position the bottom of the plane so it's just a little bit higher than the first plane. *LMB* when done.
 * Position the view to behind the camera (*MMB* and drag). Grab (*GKEY*) the second plane again and press the *YKEY* to constrain movement to the Y axis.  Move the plane to the back edge of the first plane and *LMB* when done:

[http://tubras.googlecode.com/svn/wiki/images/irrbss25.jpg]

Resize the second plane along the X axis:

 * Switch to Front View - *NUM1*.
 * Hit the *SKEY* to size, and *XKEY* to constrain the sizing along the X axis.
 * Drag the cursor until the plane is about 8 units wide. *LMB* when done.
 
Resize the height:

 * While still in Front View, hit the *TAB* key to place the second plane in Edit Mode.
 * De-select all of the vertices - *AKEY* (vertices will be pink).
 * Select the top 2 vertices either by using *SHIFT-RMB* on both of them or using the box select (*BKEY*, *LMB*, and drag).
 * Grab (*GKEY*) and then the *ZKEY* to constrain the vertex movement to the Z axis.  Position the vertices about 4 units up from the bottom.

[http://tubras.googlecode.com/svn/wiki/images/irrbss26.jpg]

*MMB* and drag behind the camera again. Our scene should now look like this:

[http://tubras.googlecode.com/svn/wiki/images/irrbss27.jpg]

Now we're ready to create a procedural/render material for the second plane. First we'll create UV coordinates for the second plane:

 * Cursor left window (3D View). 
 * Switch the second plane into UV Face Mode - *TAB*, *FKEY*.
 * Switch to Front View - *NUM1*.
 * *AKEY* to select all of the faces (only 1) - dotted white line will appear around the selection.  If no dotted line, *AKEY* again.
 * *UKEY* to call up the UV Calculation menu.
 * Select the menu item "Project from View (Bounds)". 

Now we can create an empty image to bake the material on:

 * Reset the right window to display the UV/Image Editor - Cursor over the right window, *SHIFT-F10*.
 * From the UV Editor menu select Image, New.  Set the new image parameters to 256x256 with an alpha of 1.0.  You will then see a new black image in the UV/Image Editor.

[http://tubras.googlecode.com/svn/wiki/images/irrbss28.jpg]

Next we'll create a new Blender material to bake onto the newly created image.  First add a new material in the Material Window:

[http://tubras.googlecode.com/svn/wiki/images/irrbss29.jpg]

And then add a new procedural texture to that material (2). 

Next switch to the Texture Window - *F6*, and add a new texture type of "Clouds".

[http://tubras.googlecode.com/svn/wiki/images/irrbss30.jpg]

*F5* back to the Material Window and adjust the "Map To" color to a dark gray:

[http://tubras.googlecode.com/svn/wiki/images/irrbss31.jpg]

Now we have a Blender "Cloud" material that is ready to be baked onto the new image that was previously created for the second plane:

[http://tubras.googlecode.com/svn/wiki/images/irrbss32.jpg]

To actually bake the material, select from the top menu: Render, Bake, Texture Only.  Make sure you select "Texture Only" because we don't want any lighting to be baked in along with the texture.  The other bake options should make you a little excited though :)

Here's the result of the bake:

[http://tubras.googlecode.com/svn/wiki/images/irrbss33.jpg]

As you can see, the image looks a little stretched on our mesh due to how we set up the texture coordinates.  You can fix this by adjusting the "Texture X Scaling Parameter" (yellow hilight in the above image) and re-baking the image.

Before we export the scene, we need to save the newly created/baked image.  You can do this by either:

 * Select "Image", "Save As" from the UV/Image Editor menu. Or
 * Place the cursor in the UV/Image Editor and press *ALT-SKEY*.

Save the image to:  c:\irrbScenes\irrbTut1\images\cloud.png.  Make sure you set the image type to "PNG":

[http://tubras.googlecode.com/svn/wiki/images/irrbss34.jpg]

Note if you decide to re-bake an image, you will need to re-save it in order for the updated image to appear in *iwalktest*.

Now you're ready to export and view in *iwalktest*:

[http://tubras.googlecode.com/svn/wiki/images/irrbss35.jpg]

wysiwyg baby, wysiwyg...

----

=== Single Mesh Multiple Solids ===

This tutorial demonstrates using three materials on a single mesh.  Note that you aren't limited to three materials per mesh, the fact is that it is possible to assign a different material to each *face* of a mesh.

Our intended goal is to produce the following scene:

[http://tubras.googlecode.com/svn/wiki/images/irrbss36.jpg]

This tutorial will use the following three images downloaded from [http://www.cgtextures.com/ cgtextures.com]. Save them to the c:\irrbScenes\irrbTut2\images directory:

[http://tubras.googlecode.com/svn/wiki/images/brick1.png]
[http://tubras.googlecode.com/svn/wiki/images/dirt1.png]
[http://tubras.googlecode.com/svn/wiki/images/concrete1.png]

Start with a new scene in Blender and resize the cube mesh to approximately 6x6 units.  From the Front View (*NUM1*), grab (*GKEY, ZKEY*) and move the cube up to align its bottom  to the red line.

Switch to edit mode and de-select the vertices (*AKEY*).  Box select the top vertices and move them down so the cube is approximately 4 units high.

Next we're going to do a Horizontal Loop Cut through the cube:

 * Select all of the vertices with the *AKEY*. All vertices will turn yellow when selected.
 * CTRL-RKEY to initiate the loop cut.
 * Move the mouse around the mesh until a horizontal, pink line appears
 * LMB and then slide the cut to just below the middle and then LMB to anchor the cut.

Here's what we should have so far:

[http://tubras.googlecode.com/svn/wiki/images/irrbss37.jpg]

Now we'll remove the top and front two faces:

 * Switch to Face Select Mode - *CTRL-TAB* and then select the "Faces" menu item.
 * *SHIFT-RMB* the top and front two faces.
 * *XKEY* and then select the "Faces" menu item to erase/delete the selected faces.

[http://tubras.googlecode.com/svn/wiki/images/irrbss38.jpg]

We can see from the above image that the face normals are facing out so we'll need to flip them:

 * *AKEY* to select all of the faces.
 * *WKEY* and then select the "Flip Normals" menu item.

[http://tubras.googlecode.com/svn/wiki/images/irrbss39.jpg]

Now we're ready to set up the materials.  We'll start with the ground plane and work our way up.

 * Enter UV Face Select Mode - *FKEY* when in Object Select Mode.
 * Select the ground plane - *RMB*.
 * Unwrap - UKEY.
 * Load the image "c:\irrbScenes\irrbTut2\images\dirt1.png" into the UV/Image Editor.
 * Select (*AKEY*) all of the UV coordinates in the UV/Image Editor.
 * Size (*SKEY*) the UV coordinates to approximate two and times the original:

[http://tubras.googlecode.com/svn/wiki/images/irrbss40.jpg]

Next, while in UV Edit Mode, select the three lower panels of the walls and unwrap (*UKEY*):

[http://tubras.googlecode.com/svn/wiki/images/irrbss41.jpg]

You'll notice the quads are unwrapped sideways so we'll have to rotate them in order for the brick texture to appear correctly:

 * In the UV/Image Editor select all of the UV coordinates - *AKEY*.
 * Rotate (*RKEY*) the coordinates.  If you hold *CTRL* while rotating, the rotation will occur in steps of 5 degrees.

[http://tubras.googlecode.com/svn/wiki/images/irrbss42.jpg]

After the rotate, move (*GKEY*) the coordinates down to the bottom of the work area and then load the image "c:\irrbScenes\irrbTut2\images\brick1.png":

[http://tubras.googlecode.com/svn/wiki/images/irrbss43.jpg]

We'll need to fix the "stretched" look by adjusting the UV coordinates:

 * De-select the UV coordinates - *AKEY*
 * Box select the top UV coordinates - *BKEY*, *LMB*, drag.
 * Move the top coordinates to the top of the image - *GKEY*, *YKEY*, drag, *LMB* to anchor.

[http://tubras.googlecode.com/svn/wiki/images/irrbss44.jpg]

To finish, we'll adjust the UV coordinates in the X direction:

 * Select all of the UV coordinates - *AKEY*, *AKEY*
 * Size the coordinates - *SKEY*, *XKEY*, drag, *LMB*.

[http://tubras.googlecode.com/svn/wiki/images/irrbss45.jpg]

Note that you may zoom in/out of the UV/Image Editor View by scrolling the mouse wheel.

To map the top half of the walls, repeat the steps that were used for mapping the brick.  The only difference is that you need to use the image "c:\irrbScenes\irrbTut2\images\cement1.png" in place of the "brick1.png" image.

[http://tubras.googlecode.com/svn/wiki/images/irrbss46.jpg]

And finally our exported results:

[http://tubras.googlecode.com/svn/wiki/images/irrbss36.jpg]

----

=== Transparent Material ===

To illustrate transparent materials, we'll use our work from the second Tutorial and add a transparent fence to the front of the scene:

[http://tubras.googlecode.com/svn/wiki/images/irrbss47.jpg]

Before you start, save this image to the "c:\irrbScenes\irrbTut2\images" directory as "chainlink.png".  This image was originally downloaded from [http://www.filterforge.com/filters/871.html filterforge.com]

[http://tubras.googlecode.com/svn/wiki/images/chainlink.png]

First we'll create and position the plane that the chain link texture will be mapped to:

 * In Object Mode, de-select everything - *AKEY*
 * Switch to Front View - *NUM1*.
 * Add a plane - *SPACE*, Add, Mesh, Plane.
 * Size the plane to the width of the current scene.  Adjust its height to approximately half of the current scene.
 * Position the plane to the front of the scene.

[http://tubras.googlecode.com/svn/wiki/images/irrbss48.jpg]

Next, we'll assign the image to the plane face:

 * Switch to Front View - *NUM1*.
 * Switch to UV Select Mode - *FKEY* when in Object Mode.
 * Unwrap - *UKEY*, Project from View (Bounds).
 * Load the c:\irrbScenes\irrbTut2\images\chainlin.png" image. Make certain the "Relative Paths" button is *NOT* checked when loading the image.
 * Adjust the size of the UV coordinates to obtain the appropriate tiling. 

[http://tubras.googlecode.com/svn/wiki/images/irrbss49.jpg]

In order for *irrb* to export this material as a transparent material, we need to assign the UV Layer Name a name that corresponds to an Irrlicht transparent material name.  We can use either "trans_alphach" (better quality) or "trans_alphach_ref" (more efficient).  For our example, we'll use "trans_alphch".

That's it.  Now you're ready to export and view in *iwalktest*:

[http://tubras.googlecode.com/svn/wiki/images/irrbss50.jpg]

----

=== Light Mapping ===

----

=== Normal Mapping ===

----